import {
  Image,
  SafeAreaView,
  StyleSheet,
  Text,
  TouchableOpacity,
  useWindowDimensions,
  View,
} from 'react-native';
import React from 'react';
import ConversationHeader from '../../components/conversation/ConversationHeader';
import {useContextApi, useStyles} from '../../context/ContextApi';
import {NavigProps} from '../../interfaces/NaviProps';
import {SvgXml} from 'react-native-svg';
import {LinkPreview} from '@flyerhq/react-native-link-preview';

const friends = [
  {
    id: 1,
    name: 'Amina',
    img: require('../../assets/tempAssets/3a906b3de8eaa53e14582edf5c918b5d.jpg'),
    lastMessage: 'Assalamuallikum, how are...',
  },
  {
    id: 2,
    name: 'Arif',
    img: require('../../assets/tempAssets/4005b22a3c1c23d7c04f6c9fdbd85468.jpg'),
    lastMessage: 'Sir you are great.',
  },
  {
    id: 3,
    name: 'Rahman',
    img: require('../../assets/tempAssets/51ad46951bbdc28be4cf7e384964f309.jpg'),
    lastMessage: 'Brother eid mubarak',
  },
  {
    id: 4,
    name: 'Mithila',
    img: require('../../assets/tempAssets/691af02d3a7ca8be2811716f82d9212b.jpg'),
    lastMessage: 'you: I’m feeling good',
  },
  {
    id: 5,
    name: 'Samina',
    img: require('../../assets/tempAssets/7261c2ae940abab762a6e0130b36b3a9.jpg'),
    lastMessage: 'you: I’m feeling good',
    group: false,
  },
];

const LiveConversationScreen = ({navigation}: NavigProps<null>) => {
  const {height, width} = useWindowDimensions();
  const {colors, font} = useStyles();
  const {isLive, setIsLive} = useContextApi();
  return (
    <SafeAreaView
      style={{
        height: '100%',
        backgroundColor: colors.bg,
        width: width,
      }}>
      <View
        style={{
          height: '7.5%',
        }}
      />
      <ConversationHeader
        title="Room"
        icon={`<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.28534 11.0001C6.15903 10.9997 6.03756 10.9514 5.94534 10.8651C5.48875 10.4316 5.12515 9.90972 4.87668 9.33122C4.62822 8.75272 4.50009 8.1297 4.50009 7.5001C4.50009 6.8705 4.62822 6.24748 4.87668 5.66898C5.12515 5.09048 5.48875 4.5686 5.94534 4.1351C6.04374 4.05532 6.16874 4.01585 6.29511 4.02468C6.42148 4.03351 6.53978 4.08997 6.62612 4.18266C6.71246 4.27535 6.76041 4.39736 6.76026 4.52404C6.76012 4.65071 6.7119 4.77261 6.62534 4.8651C6.26992 5.20579 5.98709 5.61485 5.79388 6.06769C5.60067 6.52052 5.50107 7.00777 5.50107 7.5001C5.50107 7.99243 5.60067 8.47968 5.79388 8.93251C5.98709 9.38535 6.26992 9.79442 6.62534 10.1351C6.69845 10.2035 6.74932 10.2924 6.77136 10.3901C6.7934 10.4877 6.7856 10.5898 6.74897 10.683C6.71233 10.7762 6.64855 10.8563 6.56589 10.9128C6.48323 10.9693 6.38549 10.9998 6.28534 11.0001ZM4.28534 12.3401C4.37847 12.2464 4.43074 12.1197 4.43074 11.9876C4.43074 11.8555 4.37847 11.7288 4.28534 11.6351C3.72596 11.1014 3.28068 10.4598 2.97644 9.74905C2.67221 9.03831 2.51534 8.27322 2.51534 7.5001C2.51534 6.72698 2.67221 5.96189 2.97644 5.25115C3.28068 4.5404 3.72596 3.89878 4.28534 3.3651C4.38215 3.27161 4.43785 3.1435 4.44019 3.00894C4.44254 2.87438 4.39133 2.74441 4.29784 2.6476C4.20436 2.5508 4.07624 2.4951 3.94168 2.49275C3.80713 2.49041 3.67715 2.54161 3.58034 2.6351C2.92171 3.2627 2.39736 4.01751 2.03909 4.85377C1.68083 5.69003 1.49609 6.59033 1.49609 7.5001C1.49609 8.40987 1.68083 9.31017 2.03909 10.1464C2.39736 10.9827 2.92171 11.7375 3.58034 12.3651C3.62846 12.4104 3.68506 12.4456 3.74689 12.4689C3.80871 12.4922 3.87454 12.503 3.94056 12.5006C4.00657 12.4983 4.07148 12.4829 4.13151 12.4554C4.19155 12.4278 4.24554 12.3886 4.29034 12.3401H4.28534ZM11.0503 10.8651C11.5069 10.4316 11.8705 9.90972 12.119 9.33122C12.3675 8.75272 12.4956 8.1297 12.4956 7.5001C12.4956 6.8705 12.3675 6.24748 12.119 5.66898C11.8705 5.09048 11.5069 4.5686 11.0503 4.1351C11.0024 4.09012 10.9461 4.05503 10.8846 4.03182C10.8231 4.00861 10.7576 3.99773 10.6919 3.99982C10.6262 4.00191 10.5616 4.01692 10.5017 4.04399C10.4418 4.07107 10.3878 4.10967 10.3428 4.1576C10.2979 4.20553 10.2628 4.26186 10.2396 4.32335C10.2163 4.38485 10.2055 4.45031 10.2076 4.51601C10.2097 4.58171 10.2247 4.64635 10.2517 4.70625C10.2788 4.76615 10.3174 4.82012 10.3653 4.8651C10.7227 5.20467 11.0072 5.61338 11.2017 6.06637C11.3961 6.51935 11.4963 7.00715 11.4963 7.5001C11.4963 7.99305 11.3961 8.48085 11.2017 8.93384C11.0072 9.38682 10.7227 9.79553 10.3653 10.1351C10.2688 10.2254 10.212 10.3503 10.2073 10.4824C10.2026 10.6146 10.2505 10.7432 10.3403 10.8401C10.3875 10.891 10.4448 10.9315 10.5085 10.959C10.5722 10.9866 10.6409 11.0006 10.7103 11.0001C10.8367 10.9997 10.9581 10.9514 11.0503 10.8651ZM13.4103 12.3651C14.0709 11.7386 14.597 10.9842 14.9565 10.1478C15.316 9.31136 15.5014 8.4105 15.5014 7.5001C15.5014 6.5897 15.316 5.68884 14.9565 4.85243C14.597 4.01602 14.0709 3.26158 13.4103 2.6351C13.312 2.55532 13.1869 2.51585 13.0606 2.52468C12.9342 2.53351 12.8159 2.58997 12.7296 2.68266C12.6432 2.77535 12.5953 2.89736 12.5954 3.02404C12.5956 3.15071 12.6438 3.27261 12.7303 3.3651C13.2897 3.89878 13.735 4.5404 14.0392 5.25115C14.3435 5.96189 14.5003 6.72698 14.5003 7.5001C14.5003 8.27322 14.3435 9.03831 14.0392 9.74905C13.735 10.4598 13.2897 11.1014 12.7303 11.6351C12.6338 11.7254 12.577 11.8503 12.5723 11.9824C12.5676 12.1146 12.6155 12.2432 12.7053 12.3401C12.752 12.3904 12.8084 12.4305 12.8712 12.458C12.934 12.4856 13.0018 12.4999 13.0703 12.5001C13.1967 12.4997 13.3181 12.4514 13.4103 12.3651ZM9.50034 7.5001C9.50034 7.30232 9.4417 7.10898 9.33181 6.94453C9.22193 6.78008 9.06575 6.65191 8.88303 6.57622C8.7003 6.50053 8.49924 6.48073 8.30525 6.51932C8.11127 6.5579 7.93309 6.65314 7.79324 6.79299C7.65339 6.93285 7.55814 7.11103 7.51956 7.30501C7.48097 7.49899 7.50078 7.70006 7.57646 7.88279C7.65215 8.06551 7.78032 8.22169 7.94477 8.33157C8.10922 8.44145 8.30256 8.5001 8.50034 8.5001C8.76556 8.5001 9.01991 8.39474 9.20745 8.20721C9.39499 8.01967 9.50034 7.76532 9.50034 7.5001Z" fill="#DBB162"/>
</svg>

`}
        button
        buttonComponent={
          <TouchableOpacity
            onPress={() => {
              setIsLive(false);
              navigation?.goBack();
            }}
            activeOpacity={0.8}
            style={{
              backgroundColor: 'rgba(241, 99, 101, 1)',
              width: '23%',
              height: 28,
              borderRadius: 100,
              justifyContent: 'center',
              alignItems: 'center',
              flexDirection: 'row',
              gap: 8,
            }}>
            <SvgXml
              xml={`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_691_5429)">
<path d="M5.59375 1.80081V6.35366C5.59375 7.07206 6.17616 7.65447 6.89456 7.65447H10.6019C10.7815 7.65447 10.9271 7.80006 10.9271 7.97969V9.08769C10.9271 9.36653 11.255 9.51606 11.4655 9.33322L13.2152 7.81378C13.3335 7.71103 13.4849 7.65447 13.6416 7.65447H14.6994C15.4178 7.65447 16.0002 7.07206 16.0002 6.35366V1.80081C16.0002 1.08241 15.4178 0.5 14.6994 0.5H6.89456C6.17612 0.5 5.59375 1.08241 5.59375 1.80081Z" fill="#FD8087"/>
<path d="M14.7008 0.5H13.6602C14.3786 0.5 14.961 1.08241 14.961 1.80081V6.35366C14.961 7.07206 14.3786 7.65447 13.6602 7.65447H14.7008C15.4192 7.65447 16.0016 7.07206 16.0016 6.35366V1.80081C16.0016 1.08241 15.4192 0.5 14.7008 0.5Z" fill="#FE646F"/>
<path d="M9.76859 6.42007C9.44116 6.10485 9.01044 5.93125 8.55575 5.93125C8.46422 5.93125 8.37378 5.93825 8.28503 5.95194C8.23966 5.8905 8.18997 5.83163 8.13616 5.77575C7.80725 5.43413 7.36191 5.24597 6.88219 5.24597C6.41375 5.24597 5.95584 5.43522 5.62587 5.76519L5.59375 5.79732V6.35366C5.59375 7.07207 6.17616 7.65447 6.89456 7.65447H10.2982C10.293 7.18232 10.105 6.744 9.76859 6.42007Z" fill="#FE646F"/>
<path d="M10.0261 10.9296C9.69785 10.6136 9.17554 10.6174 8.85194 10.941L9.57966 10.2132C9.91203 9.88087 9.92007 9.32884 9.58144 9.0028C9.25319 8.68677 8.73088 8.69055 8.40728 9.01415L9.135 8.28643C9.46738 7.95405 9.47541 7.40202 9.13679 7.07599C8.80854 6.75996 8.28622 6.76374 7.96263 7.08734L7.46857 7.5814C7.79216 7.2578 7.79594 6.73549 7.47991 6.40724C7.15388 6.06862 6.60185 6.07665 6.26947 6.40902L2.86441 9.81412L3.29963 9.0603C3.53466 8.65321 3.39953 8.11793 2.98807 7.89065C2.58919 7.67034 2.08569 7.80918 1.85685 8.20552L0.536691 10.4921C-0.369715 12.062 -0.108622 14.045 1.17322 15.3269C2.73738 16.891 5.27338 16.891 6.83753 15.3269L10.0243 12.1401C10.3567 11.8077 10.3647 11.2556 10.0261 10.9296Z" fill="#FED2A4"/>
<path d="M10.0247 10.9297C10.0117 10.9171 9.99825 10.9053 9.98466 10.8938L6.19381 14.6847C4.73894 16.1395 2.44344 16.2409 0.871094 14.9893C0.964281 15.1062 1.06413 15.2193 1.17178 15.3269C2.73594 16.8911 5.27194 16.8911 6.83609 15.3269L10.0229 12.1401C10.3553 11.8077 10.3633 11.2557 10.0247 10.9297Z" fill="#FFBD86"/>
<path d="M13.7759 5.14362H12.9141V4.31155H13.6951C13.8245 4.31155 13.9295 4.20662 13.9295 4.07718C13.9295 3.94774 13.8245 3.8428 13.6951 3.8428H12.9141V3.01074H13.7759C13.9053 3.01074 14.0103 2.9058 14.0103 2.77637C14.0103 2.6469 13.9053 2.54199 13.7759 2.54199H12.6797C12.5502 2.54199 12.4453 2.6469 12.4453 2.77637V5.37799C12.4453 5.50743 12.5502 5.61237 12.6797 5.61237H13.7759C13.9053 5.61237 14.0103 5.50743 14.0103 5.37799C14.0103 5.24855 13.9053 5.14362 13.7759 5.14362Z" fill="#DFF6FD"/>
<path d="M9.22106 3.89643C9.33606 3.75359 9.40513 3.57224 9.40513 3.37499C9.40513 2.91568 9.03144 2.54199 8.57212 2.54199H7.81641C7.68697 2.54199 7.58203 2.6469 7.58203 2.77637V5.37799C7.58203 5.44034 7.60687 5.50012 7.65103 5.54409C7.69497 5.5878 7.75444 5.61237 7.81641 5.61237H7.81744C7.8175 5.61237 8.5125 5.60927 8.70409 5.60927C9.21947 5.60927 9.63875 5.18999 9.63875 4.67462C9.63875 4.35027 9.47262 4.06412 9.22106 3.89643ZM8.57212 3.01074C8.77297 3.01074 8.93638 3.17415 8.93638 3.37499C8.93638 3.57584 8.77297 3.73924 8.57212 3.73924C8.51637 3.73924 8.41119 3.73955 8.29662 3.73993H8.05078V3.01074H8.57212ZM8.70409 5.14052C8.58497 5.14052 8.27153 5.14171 8.05078 5.14262V4.20968C8.12784 4.20937 8.21481 4.20902 8.29703 4.20874H8.70409C8.961 4.20874 9.17 4.41774 9.17 4.67465C9.17 4.93155 8.961 5.14052 8.70409 5.14052Z" fill="#DFF6FD"/>
<path d="M11.8378 2.58658C11.7293 2.51598 11.5841 2.54664 11.5135 2.65514L10.8854 3.61995L10.2509 2.64827C10.1802 2.53986 10.0349 2.50939 9.92657 2.58014C9.8182 2.65092 9.7877 2.79614 9.85848 2.90452L10.6512 4.11855L10.6481 5.37742C10.6478 5.50689 10.7524 5.61205 10.8819 5.61239H10.8825C11.0116 5.61239 11.1165 5.50783 11.1169 5.37861L11.1199 4.11892L11.9064 2.91086C11.9769 2.80239 11.9462 2.6572 11.8378 2.58658Z" fill="#DFF6FD"/>
<path d="M9.78752 9.33896L6.89193 12.2346L6.03765 11.3803L9.13284 8.28509C9.36612 8.05078 9.43859 7.70812 9.34287 7.41215L5.70621 11.0488L4.85193 10.1945L7.46659 7.57987C7.69902 7.34631 7.76543 7.01 7.6659 6.71765L4.52046 9.86309L4.43915 9.78178C4.34762 9.69025 4.19921 9.69025 4.10771 9.78178C4.01618 9.87331 4.01618 10.0217 4.10771 10.1132L6.97321 12.9787C7.01896 13.0245 7.07896 13.0474 7.13893 13.0474C7.1989 13.0474 7.2589 13.0245 7.30465 12.9787C7.39618 12.8872 7.39618 12.7388 7.30465 12.6473L7.22334 12.566L9.57762 10.2117C9.8108 9.97743 9.88321 9.63484 9.78752 9.33896Z" fill="#FFBD86"/>
<path d="M2.86329 9.81357L2.86276 9.8141L3.29798 9.06026C3.44692 8.80232 3.44704 8.49295 3.32257 8.24304L2.49479 9.5192L2.34467 9.75704C2.19526 9.99376 2.18214 10.2954 2.31045 10.5442L2.74914 11.3947C3.03798 11.9547 2.93267 12.6304 2.48707 13.0759L2.38432 13.1787C2.29279 13.2702 2.29282 13.4186 2.38435 13.5101C2.4301 13.5559 2.49007 13.5788 2.55007 13.5788C2.61007 13.5788 2.67004 13.5559 2.71582 13.5101L2.81857 13.4074C3.40895 12.817 3.54845 11.9218 3.16576 11.1798L2.72707 10.3293C2.67457 10.2275 2.67995 10.1041 2.74107 10.0072L2.86329 9.81357Z" fill="#FFBD86"/>
</g>
<defs>
<clipPath id="clip0_691_5429">
<rect width="16" height="16" fill="white" transform="translate(0 0.5)"/>
</clipPath>
</defs>
</svg>
`}
            />
            <Text
              style={{
                fontFamily: font.PoppinsSemiBold,
                fontSize: 13,
                color: colors.textColor.white,
              }}>
              Leave
            </Text>
          </TouchableOpacity>
        }
        navigation={navigation}
      />
      <View style={{}}>
        <View
          style={{
            flexDirection: 'row',

            paddingHorizontal: '4%',
            paddingVertical: '3%',

            borderRadius: 100,
            alignItems: 'center',
            justifyContent: 'space-between',
          }}>
          <View style={{}}>
            <Text
              style={{
                fontFamily: font.Poppins,
                fontSize: 12,
                color: colors.textColor.neutralColor,
              }}>
              Asadullah created a group
            </Text>
            <Text
              style={{
                fontFamily: font.PoppinsSemiBold,
                fontSize: 14,
                color: colors.textColor.secondaryColor,
              }}>
              Asadullah calling live{' '}
            </Text>
            <View
              style={{
                flexDirection: 'row',
                alignItems: 'center',
                gap: 8,
              }}>
              <Image
                style={{
                  width: 12,
                  height: 12,
                }}
                source={require('../../assets/icons/modalIcons/earthyGray.png')}
              />
              <Text
                style={{
                  fontFamily: font.PoppinsSemiBold,
                  fontSize: 12,
                  color: colors.textColor.neutralColor,
                }}>
                Public
              </Text>
            </View>
          </View>
          <View>
            <TouchableOpacity onPress={{}}>
              <SvgXml
                xml={`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_854_4542)">
        <path d="M9.75 12C9.75 13.2405 10.7595 14.25 12 14.25C13.2405 14.25 14.25 13.2405 14.25 12C14.25 10.7595 13.2405 9.75 12 9.75C10.7595 9.75 9.75 10.7595 9.75 12Z" fill="${colors.textColor.neutralColor}"/>
        <path d="M9.75 19.5C9.75 20.7405 10.7595 21.75 12 21.75C13.2405 21.75 14.25 20.7405 14.25 19.5C14.25 18.2595 13.2405 17.25 12 17.25C10.7595 17.25 9.75 18.2595 9.75 19.5Z" fill="${colors.textColor.neutralColor}"/>
        <path d="M9.75 4.5C9.75 5.7405 10.7595 6.75 12 6.75C13.2405 6.75 14.25 5.7405 14.25 4.5C14.25 3.2595 13.2405 2.25 12 2.25C10.7595 2.25 9.75 3.2595 9.75 4.5Z" fill="${colors.textColor.neutralColor}"/>
        </g>
        <defs>
        <clipPath id="clip0_854_4542">
        <rect width="24" height="24" fill="white"/>
        </clipPath>
        </defs>
        </svg>
        `}
              />
            </TouchableOpacity>
          </View>
        </View>
        <View>
          <LinkPreview
            text="https://www.youtube.com/watch?v=TEVXJ5tdzI4"
            enableAnimation
            renderLinkPreview={({aspectRatio, containerWidth, previewData}) => {
              // console.log(previewData);
              return (
                <View
                  style={{
                    width: '90%',
                    height: height * 0.1,
                    backgroundColor: previewData?.title
                      ? colors.secondaryColor
                      : colors.white,
                    borderRadius: 15,

                    flexDirection: 'row',
                    // paddingHorizontal: '4%',
                    gap: 10,
                    alignSelf: 'center',
                  }}>
                  {previewData?.image && (
                    <Image
                      source={{uri: previewData?.image?.url}}
                      style={{
                        width: width * 0.27,
                        height: height * 0.1,
                        borderRadius: 15,
                      }}
                    />
                  )}
                  <View
                    style={{
                      width: width * 0.589,
                      height: '100%',
                      // alignItems: 'center',
                      justifyContent: 'center',
                    }}>
                    <Text
                      style={{
                        fontFamily: font.PoppinsSemiBold,
                        fontSize: 14,
                        color: colors.textColor.primaryColor,
                        marginTop: -15,
                      }}
                      numberOfLines={1}>
                      {previewData?.title}
                    </Text>

                    <Text
                      numberOfLines={1}
                      style={{
                        marginTop: 10,
                        fontFamily: font.Poppins,
                        fontSize: 10,
                        color: colors.textColor.primaryColor,
                      }}>
                      {previewData?.link}
                    </Text>
                  </View>
                  {/* <Text>{previewData?.link}</Text> */}
                  {/* {!previewData?.link && <Text>None</Text>} */}
                </View>
              );
            }}
          />
        </View>
      </View>
      <View
        style={{
          marginVertical: 10,
          height: 1,
          width: '100%',
          backgroundColor: colors.gray.variantTwo,
        }}
      />
      <View></View>
    </SafeAreaView>
  );
};

export default LiveConversationScreen;

const styles = StyleSheet.create({});
